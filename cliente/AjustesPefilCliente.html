<!DOCTYPE html>

<html class="dark" lang="es"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Ajustes de Perfil Cliente - Sorteos Web</title>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;family=Noto+Sans:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#2463eb",
              "background-light": "#f6f6f8",
              "background-dark": "#111621",
              "card-dark": "#1a202c",
              "input-dark": "#2d3748",
            },
            fontFamily: {
              "display": ["Inter", "Noto Sans", "sans-serif"]
            },
            borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
          },
        },
      }
    </script>
<style>
        /* Custom Scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111318; 
        }
        ::-webkit-scrollbar-thumb {
            background: #282d39; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3b4254; 
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display overflow-hidden h-screen flex text-slate-900 dark:text-white">
<!-- Sidebar Container - Layout reutilizable -->
<div id="client-sidebar-container"></div>
<!-- Mobile Menu Container -->
<div id="client-mobile-menu-container"></div>
<!-- Main Content -->
<main class="flex-1 flex flex-col min-w-0 bg-[#111318]">
<!-- Top Header -->
<header class="h-16 flex items-center justify-between px-6 lg:px-10 border-b border-[#282d39] bg-[#111318] sticky top-0 z-20">
<!-- Mobile Menu Toggle -->
<button id="mobile-menu-toggle" class="lg:hidden text-white mr-4" aria-label="Abrir menú de navegación">
<span class="material-symbols-outlined">menu</span>
</button>
<!-- Page Title -->
<h1 class="text-xl font-bold text-white hidden sm:block">Ajustes de Perfil</h1>
<div class="ml-auto"></div>
</header>
<!-- Scrollable Content Area -->
<div class="flex-1 overflow-y-auto overflow-x-hidden p-6 lg:p-10">
<!-- Main Content Container -->
<div class="w-full max-w-[1440px] mx-auto flex flex-col lg:flex-row gap-6">
<!-- Sidebar Navigation -->
<aside class="w-full lg:w-72 flex-shrink-0">
<div class="bg-card-dark rounded-xl p-6 border border-[#282d39] h-full min-h-[500px] flex flex-col">
<!-- Profile Snippet -->
<div class="flex items-center gap-4 mb-8 pb-6 border-b border-[#282d39]">
<div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12" data-alt="User avatar small" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBBrupAsp5FgxLWvA_4eDdbO6IBv60Wu2kUzWPNIeip67-oe7I9b2nzaS82HH1OLDR3kt3eIpanzRITFMLGrGYsXnYYc9VA7cfYcoXpQAV1ZQ-hf-DJpgeVpZ2V8DWaQFUHaeUoD_hKmPFlDXfF9XUj5aA9UwMFZqIMKCl-VjIMi1AeKlxdFIXwIkUzXtyq30ajvF07xm95jeC5M4OIFYr8wXRjuU9unKPkk0g_KAcx7iySUtEgz0MBnnruUiSrXMXHZKuiIMrFkg4");'></div>
<div class="flex flex-col">
<h1 class="text-white text-base font-bold">Juan Pérez</h1>
<p class="text-text-secondary text-xs">Cliente VIP</p>
</div>
</div>
<!-- Navigation Links -->
<nav class="flex flex-col gap-2 flex-1">
<a class="flex items-center gap-3 px-4 py-3 rounded-lg bg-primary/10 text-primary border-l-4 border-primary" href="#">
<span class="material-symbols-outlined">person</span>
<span class="text-sm font-bold">Información Personal</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-lg text-text-secondary hover:bg-[#282d39] hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">lock</span>
<span class="text-sm font-medium">Seguridad</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-lg text-text-secondary hover:bg-[#282d39] hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">notifications</span>
<span class="text-sm font-medium">Notificaciones</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-lg text-text-secondary hover:bg-[#282d39] hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">credit_card</span>
<span class="text-sm font-medium">Métodos de Pago</span>
</a>
<a class="flex items-center gap-3 px-4 py-3 rounded-lg text-text-secondary hover:bg-[#282d39] hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined">history</span>
<span class="text-sm font-medium">Historial de Sorteos</span>
</a>
</nav>
</div>
</aside>
<!-- Main Content Area -->
<main class="flex-1 flex flex-col gap-6">
<!-- Page Header -->
<div class="bg-[#111318] dark:bg-card-dark p-6 rounded-xl border border-[#282d39] flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div>
<h2 class="text-white text-2xl font-bold tracking-tight">Ajustes de Perfil</h2>
<p class="text-text-secondary text-sm mt-1">Gestiona tu información personal y preferencias de la cuenta.</p>
</div>
</div>
<!-- Profile Info Section -->
<section class="bg-[#111318] dark:bg-card-dark rounded-xl border border-[#282d39] overflow-hidden">
<div class="p-6 border-b border-[#282d39]">
<h3 class="text-white text-lg font-bold flex items-center gap-2">
<span class="material-symbols-outlined text-primary">badge</span>
                        Información Personal
                    </h3>
</div>
<div class="p-6 lg:p-8">
<!-- Avatar Upload -->
<div class="flex flex-col sm:flex-row gap-6 mb-8 items-center sm:items-start">
<div class="relative group cursor-pointer">
<div class="bg-center bg-no-repeat bg-cover rounded-full w-24 h-24 border-2 border-primary/50 group-hover:border-primary transition-colors" data-alt="User avatar large" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDGuIh6aso4QumOT9FeAmtvNPV87AjsM2Mu8MP96AGuwYqp-sR6G0-z1o0dmajilp9nVokPOW8OcZ50OiPdVJVFhGSggxdLroPiSuUVFsm1KGlsQ1pqDNO2OPEmcqfxRfZxgd_jKnCmN8EFW5qEUr_nxBXzcB4-yqkx2E7vgzFgt1cLqtYKt0PVdk9Wtoc7eV28RI8aVzcqwEnGYvEF5hGaqeqEv_b9jRwJIFEXYSwZJmZiojOfS1yuoS6kLExlnIKcWOsvA8nc6Hk");'></div>
<div class="absolute inset-0 bg-black/50 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
<span class="material-symbols-outlined text-white">photo_camera</span>
</div>
</div>
<div class="flex-1 text-center sm:text-left">
<h4 class="text-white font-medium mb-1">Tu Foto de Perfil</h4>
<p class="text-text-secondary text-sm mb-4">Esta foto será visible para tu perfil público y comentarios.</p>
<div class="flex gap-3 justify-center sm:justify-start">
<button class="px-4 py-2 bg-[#282d39] hover:bg-[#323846] text-white text-xs font-bold rounded-lg transition-colors border border-[#3e4552]">
                                    Subir Nueva
                                </button>
<button class="px-4 py-2 text-red-400 hover:text-red-300 hover:bg-red-900/20 text-xs font-bold rounded-lg transition-colors">
                                    Eliminar
                                </button>
</div>
</div>
</div>
<!-- Form Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Nombre Completo</label>
<div class="relative">
<span class="material-symbols-outlined absolute left-3 top-2.5 text-text-secondary text-[20px]">person</span>
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent pl-10 py-2.5 placeholder-[#566074]" placeholder="Tu nombre" type="text" value="Juan Pérez"/>
</div>
</div>
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Correo Electrónico</label>
<div class="relative">
<span class="material-symbols-outlined absolute left-3 top-2.5 text-text-secondary text-[20px]">mail</span>
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent pl-10 py-2.5 placeholder-[#566074]" placeholder="email@ejemplo.com" type="email" value="juan.perez@email.com"/>
</div>
</div>
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Teléfono</label>
<div class="relative">
<span class="material-symbols-outlined absolute left-3 top-2.5 text-text-secondary text-[20px]">call</span>
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent pl-10 py-2.5 placeholder-[#566074]" placeholder="+1 234 567 890" type="tel" value="+34 612 345 678"/>
</div>
</div>
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Dirección</label>
<div class="relative">
<span class="material-symbols-outlined absolute left-3 top-2.5 text-text-secondary text-[20px]">location_on</span>
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent pl-10 py-2.5 placeholder-[#566074]" placeholder="Tu dirección completa" type="text" value="Calle Gran Vía 22, Madrid"/>
</div>
</div>
</div>
</div>
<div class="px-6 py-4 bg-[#151a23] border-t border-[#282d39] flex justify-end">
<button class="bg-primary hover:bg-blue-600 text-white px-6 py-2 rounded-lg font-bold text-sm shadow-lg shadow-blue-900/20 transition-all flex items-center gap-2">
<span class="material-symbols-outlined text-[18px]">save</span>
                        Guardar Información
                    </button>
</div>
</section>
<!-- Security Section -->
<section class="bg-[#111318] dark:bg-card-dark rounded-xl border border-[#282d39] overflow-hidden">
<div class="p-6 border-b border-[#282d39]">
<h3 class="text-white text-lg font-bold flex items-center gap-2">
<span class="material-symbols-outlined text-primary">lock_reset</span>
                        Cambiar Contraseña
                    </h3>
</div>
<div class="p-6 lg:p-8">
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Contraseña Actual</label>
<div class="relative">
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent px-3 py-2.5 placeholder-[#566074]" placeholder="********" type="password"/>
</div>
</div>
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Nueva Contraseña</label>
<div class="relative">
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent px-3 py-2.5 placeholder-[#566074]" placeholder="********" type="password"/>
</div>
</div>
<div class="flex flex-col gap-2">
<label class="text-white text-sm font-medium">Confirmar Nueva</label>
<div class="relative">
<input class="w-full bg-[#111621] border border-[#282d39] text-white text-sm rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent px-3 py-2.5 placeholder-[#566074]" placeholder="********" type="password"/>
</div>
</div>
</div>
</div>
<div class="px-6 py-4 bg-[#151a23] border-t border-[#282d39] flex justify-end">
<button class="bg-[#282d39] hover:bg-[#323846] text-white px-6 py-2 rounded-lg font-bold text-sm transition-all border border-[#3e4552]">
                        Actualizar Contraseña
                    </button>
</div>
</section>
<!-- Notifications Section -->
<section class="bg-[#111318] dark:bg-card-dark rounded-xl border border-[#282d39] overflow-hidden">
<div class="p-6 border-b border-[#282d39]">
<h3 class="text-white text-lg font-bold flex items-center gap-2">
<span class="material-symbols-outlined text-primary">notifications_active</span>
                        Preferencias de Notificación
                    </h3>
</div>
<div class="p-6 lg:p-8 flex flex-col gap-6">
<!-- Notification Item -->
<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-6 border-b border-[#282d39]">
<div>
<h4 class="text-white font-medium mb-1">Nuevos Sorteos Disponibles</h4>
<p class="text-text-secondary text-sm">Recibe alertas cuando se lancen nuevos sorteos en la plataforma.</p>
</div>
<div class="flex gap-4">
<label class="inline-flex items-center cursor-pointer gap-2 group">
<input checked="" class="sr-only peer" type="checkbox" value=""/>
<div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
<span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">Email</span>
</label>
<label class="inline-flex items-center cursor-pointer gap-2 group">
<input class="sr-only peer" type="checkbox" value=""/>
<div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
<span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">SMS</span>
</label>
</div>
</div>
<!-- Notification Item -->
<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4 pb-6 border-b border-[#282d39]">
<div>
<h4 class="text-white font-medium mb-1">Resultados de Sorteos</h4>
<p class="text-text-secondary text-sm">Entérate inmediatamente si has ganado o los resultados generales.</p>
</div>
<div class="flex gap-4">
<label class="inline-flex items-center cursor-pointer gap-2 group">
<input checked="" class="sr-only peer" type="checkbox" value=""/>
<div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
<span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">Email</span>
</label>
<label class="inline-flex items-center cursor-pointer gap-2 group">
<input checked="" class="sr-only peer" type="checkbox" value=""/>
<div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
<span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">WhatsApp</span>
</label>
</div>
</div>
<!-- Notification Item -->
<div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
<div>
<h4 class="text-white font-medium mb-1">Promociones y Ofertas</h4>
<p class="text-text-secondary text-sm">Ofertas especiales en la compra de boletos.</p>
</div>
<div class="flex gap-4">
<label class="inline-flex items-center cursor-pointer gap-2 group">
<input class="sr-only peer" type="checkbox" value=""/>
<div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-primary rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"></div>
<span class="text-sm font-medium text-gray-400 group-hover:text-white transition-colors">Email</span>
</label>
</div>
</div>
</div>
<div class="px-6 py-4 bg-[#151a23] border-t border-[#282d39] flex justify-end">
<button class="bg-[#282d39] hover:bg-[#323846] text-white px-6 py-2 rounded-lg font-bold text-sm transition-all border border-[#3e4552]">
                        Guardar Preferencias
                    </button>
</div>
</section>
</main>
</div>
<!-- Alert / Toast (Example: Hidden by default, just showing layout) -->
<!-- Remove 'hidden' class to see it -->
<div class="fixed bottom-6 right-6 hidden z-50 animate-bounce">
<div class="bg-card-dark border-l-4 border-green-500 text-white px-6 py-4 rounded shadow-xl flex items-center gap-3">
<span class="material-symbols-outlined text-green-500">check_circle</span>
<div>
<p class="font-bold text-sm">¡Guardado con éxito!</p>
<p class="text-xs text-gray-400">Tus cambios se han actualizado correctamente.</p>
</div>
<span class="material-symbols-outlined text-gray-500 cursor-pointer text-sm ml-4">close</span>
</div>
</div>
</div>
</div>
</main>
<!-- Client Layout Script -->
<script src="js/client-layout.js"></script>
<script src="js/custom-alerts.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    if (window.ClientLayout) {
        ClientLayout.init('perfil');
    }
    
    // Inicializar todas las funcionalidades
    initProfileFunctionality();
});

// Función para inicializar todas las funcionalidades del perfil
function initProfileFunctionality() {
    // Funcionalidad de avatar
    initAvatarUpload();
    
    // Funcionalidad de formularios
    initSavePersonalInfo();
    initChangePassword();
    initSavePreferences();
    
    // Funcionalidad de navegación lateral
    initSidebarNavigation();
}

// Función para manejar la subida y eliminación de avatar
function initAvatarUpload() {
    // Click en el avatar para subir
    const avatarContainer = document.querySelector('.group.cursor-pointer');
    const uploadBtn = document.querySelector('button:contains("Subir Nueva")') || 
                     Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.includes('Subir Nueva'));
    const deleteBtn = Array.from(document.querySelectorAll('button')).find(btn => btn.textContent.includes('Eliminar'));
    
    // Input de archivo oculto
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = 'image/*';
    fileInput.style.display = 'none';
    document.body.appendChild(fileInput);
    
    // Función para subir nueva foto
    function handleUploadPhoto() {
        fileInput.click();
    }
    
    fileInput.addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (file) {
            if (file.size > 5 * 1024 * 1024) {
                customAlert('La imagen no puede ser mayor a 5MB', 'Archivo Demasiado Grande', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const avatarElements = document.querySelectorAll('[data-alt*="avatar"]');
                avatarElements.forEach(element => {
                    element.style.backgroundImage = `url('${event.target.result}')`;
                });
                showToast('Foto de perfil actualizada exitosamente', 'success');
            };
            reader.readAsDataURL(file);
        }
    });
    
    // Agregar event listeners
    if (avatarContainer) {
        avatarContainer.addEventListener('click', handleUploadPhoto);
    }
    
    const uploadButton = Array.from(document.querySelectorAll('button')).find(
        btn => btn.textContent.trim().includes('Subir Nueva')
    );
    if (uploadButton) {
        uploadButton.addEventListener('click', function(e) {
            e.stopPropagation();
            handleUploadPhoto();
        });
    }
    
    // Función para eliminar foto
    if (deleteBtn) {
        deleteBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            customConfirm('¿Estás seguro de que deseas eliminar tu foto de perfil?', 'Eliminar Foto de Perfil', 'warning').then(confirmed => {
                if (confirmed) {
                    const defaultAvatar = 'https://via.placeholder.com/150/282d39/9da6b9?text=Usuario';
                    const avatarElements = document.querySelectorAll('[data-alt*="avatar"]');
                    avatarElements.forEach(element => {
                        element.style.backgroundImage = `url('${defaultAvatar}')`;
                    });
                    customToast('Foto de perfil eliminada', 'success');
                }
            });
        });
    }
}

// Función para guardar información personal
function initSavePersonalInfo() {
    const saveBtn = Array.from(document.querySelectorAll('button')).find(
        btn => btn.textContent.includes('Guardar Información')
    );
    
    if (saveBtn) {
        saveBtn.addEventListener('click', function() {
            const nombre = document.querySelector('input[type="text"][value*="Juan"]').value.trim();
            const email = document.querySelector('input[type="email"]').value.trim();
            const telefono = document.querySelector('input[type="tel"]').value.trim();
            const direccion = Array.from(document.querySelectorAll('input[type="text"]'))
                .find(input => input.placeholder && input.placeholder.includes('dirección'))?.value.trim() || '';
            
            // Validaciones
            if (!nombre || nombre.length < 3) {
                showToast('El nombre debe tener al menos 3 caracteres', 'error');
                return;
            }
            
            if (!email || !email.includes('@')) {
                showToast('Por favor ingresa un correo electrónico válido', 'error');
                return;
            }
            
            // Simular guardado (aquí iría la llamada al servidor)
            console.log('Guardando información:', { nombre, email, telefono, direccion });
            
            // Guardar en localStorage
            const profileData = {
                nombre,
                email,
                telefono,
                direccion,
                fechaActualizacion: new Date().toISOString()
            };
            localStorage.setItem('profileData', JSON.stringify(profileData));
            
            showToast('Información personal guardada exitosamente', 'success');
        });
    }
}

// Función para cambiar contraseña
function initChangePassword() {
    const changePasswordBtn = Array.from(document.querySelectorAll('button')).find(
        btn => btn.textContent.includes('Actualizar Contraseña')
    );
    
    if (changePasswordBtn) {
        changePasswordBtn.addEventListener('click', function() {
            const passwordInputs = Array.from(document.querySelectorAll('input[type="password"]'));
            const actualPassword = passwordInputs[0]?.value.trim();
            const nuevaPassword = passwordInputs[1]?.value.trim();
            const confirmarPassword = passwordInputs[2]?.value.trim();
            
            // Validaciones
            if (!actualPassword || !nuevaPassword || !confirmarPassword) {
                showToast('Por favor completa todos los campos', 'error');
                return;
            }
            
            if (nuevaPassword.length < 8) {
                showToast('La nueva contraseña debe tener al menos 8 caracteres', 'error');
                return;
            }
            
            if (nuevaPassword !== confirmarPassword) {
                showToast('Las contraseñas no coinciden', 'error');
                return;
            }
            
            if (actualPassword === nuevaPassword) {
                showToast('La nueva contraseña debe ser diferente a la actual', 'error');
                return;
            }
            
            // Simular actualización (aquí iría la llamada al servidor)
            console.log('Actualizando contraseña...');
            
            // Limpiar campos
            passwordInputs.forEach(input => input.value = '');
            
            showToast('Contraseña actualizada exitosamente', 'success');
        });
    }
}

// Función para guardar preferencias de notificación
function initSavePreferences() {
    const savePreferencesBtn = Array.from(document.querySelectorAll('button')).find(
        btn => btn.textContent.includes('Guardar Preferencias')
    );
    
    if (savePreferencesBtn) {
        savePreferencesBtn.addEventListener('click', function() {
            const checkboxes = Array.from(document.querySelectorAll('input[type="checkbox"]'));
            const preferences = {};
            
            checkboxes.forEach((checkbox, index) => {
                const label = checkbox.closest('label');
                const text = label ? label.textContent.trim() : `Preferencia ${index + 1}`;
                preferences[text] = checkbox.checked;
            });
            
            // Guardar en localStorage
            localStorage.setItem('notificationPreferences', JSON.stringify(preferences));
            
            console.log('Preferencias guardadas:', preferences);
            showToast('Preferencias de notificación guardadas exitosamente', 'success');
        });
    }
}

// Función para navegación lateral (secciones)
function initSidebarNavigation() {
    // Solo seleccionar enlaces del sidebar interno de la página (dentro del contenedor de contenido principal)
    // NO incluir el sidebar principal del layout (#client-sidebar)
    const pageContentContainer = document.querySelector('.max-w-\\[1440px\\]');
    if (!pageContentContainer) return;
    
    const pageSidebar = pageContentContainer.querySelector('aside nav');
    if (!pageSidebar) return;
    
    const navLinks = pageSidebar.querySelectorAll('a');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            // Solo prevenir default si es un enlace de ancla (#) o enlace vacío
            // Permitir que los enlaces a otras páginas funcionen normalmente
            const href = this.getAttribute('href');
            if (href === '#' || !href || href.startsWith('#')) {
                e.preventDefault();
            } else {
                // Si es un enlace a otra página HTML, permitir navegación normal
                // No hacer nada, dejar que el navegador maneje la navegación
                return;
            }
            
            // Remover clase activa de todos
            navLinks.forEach(l => {
                l.classList.remove('bg-primary/10', 'text-primary', 'border-l-4', 'border-primary');
                l.classList.add('text-text-secondary', 'hover:bg-[#282d39]', 'hover:text-white');
            });
            
            // Agregar clase activa al clickeado
            this.classList.remove('text-text-secondary', 'hover:bg-[#282d39]', 'hover:text-white');
            this.classList.add('bg-primary/10', 'text-primary', 'border-l-4', 'border-primary');
            
            // Scroll a la sección correspondiente
            const sectionText = this.textContent.trim();
            let targetId = '';
            
            if (sectionText.includes('Personal')) {
                // Ya estamos en información personal
                return;
            } else if (sectionText.includes('Seguridad')) {
                targetId = 'security-section';
            } else if (sectionText.includes('Notificaciones')) {
                targetId = 'notifications-section';
            } else if (sectionText.includes('Pago')) {
                customAlert('Funcionalidad de métodos de pago: Aquí se mostrarían los métodos de pago guardados.', 'Métodos de Pago', 'info');
                return;
            } else if (sectionText.includes('Historial')) {
                customAlert('Funcionalidad de historial: Aquí se mostraría el historial de sorteos.', 'Historial', 'info');
                return;
            }
            
            if (targetId) {
                const section = document.getElementById(targetId);
                if (section) {
                    section.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            }
        });
    });
}

// Función para mostrar toasts/notificaciones
function showToast(message, type = 'success') {
    // Crear elemento toast
    const toast = document.createElement('div');
    toast.className = `fixed bottom-6 right-6 z-50 animate-slide-in`;
    toast.style.animation = 'slideIn 0.3s ease-out';
    
    const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
    const icon = type === 'success' ? 'check_circle' : 'error';
    
    toast.innerHTML = `
        <div class="bg-card-dark border-l-4 ${type === 'success' ? 'border-green-500' : 'border-red-500'} text-white px-6 py-4 rounded shadow-xl flex items-center gap-3 min-w-[300px]">
            <span class="material-symbols-outlined text-${type === 'success' ? 'green' : 'red'}-500">${icon}</span>
            <div class="flex-1">
                <p class="font-bold text-sm">${message}</p>
            </div>
            <span class="material-symbols-outlined text-gray-500 cursor-pointer text-sm ml-4 close-toast">close</span>
        </div>
    `;
    
    document.body.appendChild(toast);
    
    // Cerrar toast
    const closeBtn = toast.querySelector('.close-toast');
    closeBtn.addEventListener('click', () => {
        toast.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
    });
    
    // Auto cerrar después de 5 segundos
    setTimeout(() => {
        if (toast.parentNode) {
            toast.style.animation = 'slideOut 0.3s ease-out';
            setTimeout(() => toast.remove(), 300);
        }
    }, 5000);
}

// Agregar estilos para animaciones si no existen
if (!document.getElementById('toast-animations')) {
    const style = document.createElement('style');
    style.id = 'toast-animations';
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
    `;
    document.head.appendChild(style);
}
</script>
</body></html>

<!-- Página para ajustes de perfil como cliente después de iniciar sesión
     Se ve esta página para ajustar la información personal, la seguridad, las notificaciones y los métodos de pago. -->