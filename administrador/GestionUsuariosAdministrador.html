<!DOCTYPE html>

<html class="dark" lang="es"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Gestión de Usuarios Admin</title>
<!-- Google Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
<!-- Material Symbols -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2463eb",
                        "background-light": "#f6f6f8",
                        "background-dark": "#111621",
                        "card-dark": "#1e2433", // Slightly lighter than bg-dark for contrast
                        "border-dark": "#2a3241",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {"DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px"},
                },
            },
        }
    </script>
<style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111621; 
        }
        ::-webkit-scrollbar-thumb {
            background: #2a3241; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #3b4657; 
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white antialiased overflow-hidden">
<div class="flex h-screen w-full">
<!-- Sidebar -->
<aside class="w-64 flex-shrink-0 flex flex-col border-r border-gray-200 dark:border-border-dark bg-white dark:bg-[#151a25]">
<div class="h-16 flex items-center px-6 border-b border-gray-200 dark:border-border-dark">
<div class="flex items-center gap-2 text-primary">
<span class="material-symbols-outlined text-3xl">confirmation_number</span>
<span class="text-lg font-bold tracking-tight text-slate-900 dark:text-white">Sorteos<span class="text-primary">Admin</span></span>
</div>
</div>
<div class="flex-1 overflow-y-auto py-4 px-3 space-y-1">
<p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 mt-2">Principal</p>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="DashboardAdmnistrador.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">dashboard</span>
                    Dashboard
                </a>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="CrudGestionSorteo.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">confirmation_number</span>
                    Gestión de Sorteos
                </a>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="ValidacionPagosAdministrador.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">payments</span>
                    Validación de Pagos
                    <span class="ml-auto bg-yellow-500/20 text-yellow-500 text-xs font-bold px-2 py-0.5 rounded-full">3</span>
</a>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="GeneradorGanadoresAdminstradores.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">emoji_events</span>
                    Generación de Ganadores
                </a>
<p class="px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 mt-6">Administración</p>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg bg-primary/10 text-primary font-medium" href="GestionUsuariosAdministrador.html">
<span class="material-symbols-outlined">group</span>
                    Usuarios
                </a>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="AuditoriaAccionesAdmin.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">settings</span>
                    Auditoría
                </a>
<a class="flex items-center gap-3 px-3 py-2.5 rounded-lg text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white transition-colors group" href="InformesEstadisticasAdmin.html">
<span class="material-symbols-outlined group-hover:text-primary transition-colors">analytics</span>
                    Informes
                </a>
</div>
<div class="p-4 border-t border-gray-200 dark:border-border-dark">
<div class="flex items-center gap-3">
<div class="w-10 h-10 rounded-full bg-cover bg-center" data-alt="User profile picture" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuAfIzDdUJZk0e1bBHKOe7BG0HPanJ3nx8d9vtsJZZMiXM6ZJw9-oPch2DQWyWWrowTikKHJBUkhOyI6hUEiy_TgTGdRmm-4uDyO3KjasL500lcWogtry5HOXaJxBgDxpuT_8QBEVTnbuI4727c7c5qtPNid2CyQr0SnpyEcv2R9UEoiXiOVUH_g0RdYwYfb9u5EU5DkqEZl2oL9UW9s45D-zD3htPmEHk69TrCVPL50vnE6cDfTlcz9AJEZo7Hb8gpAhxwAxDP4SCs');"></div>
<div class="flex flex-col">
<span class="text-sm font-medium text-slate-900 dark:text-white">Admin User</span>
<span class="text-xs text-gray-500">admin@sorteos.web</span>
</div>
</div>
</div>
</aside>
<!-- Main Content -->
<main class="flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark relative">
<!-- Header -->
<header class="h-16 flex items-center justify-between px-6 border-b border-gray-200 dark:border-border-dark bg-white dark:bg-[#151a25]/80 backdrop-blur-md sticky top-0 z-20">
<div class="flex items-center gap-4">
<!-- Mobile menu trigger (hidden on desktop) -->
<button class="lg:hidden text-gray-500">
<span class="material-symbols-outlined">menu</span>
</button>
<h1 class="text-xl font-bold text-slate-900 dark:text-white hidden sm:block">Gestión de Usuarios</h1>
</div>
<div class="flex items-center gap-4">
<div class="relative hidden md:block w-64">
<span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
<span class="material-symbols-outlined text-[20px]">search</span>
</span>
<input class="w-full bg-gray-100 dark:bg-[#1e2433] border-none rounded-lg py-2 pl-10 pr-4 text-sm text-slate-900 dark:text-white focus:ring-2 focus:ring-primary placeholder-gray-500" placeholder="Buscar sorteo, usuario..." type="text"/>
</div>
<button class="relative p-2 text-gray-500 hover:text-primary transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-white/5">
<span class="material-symbols-outlined">notifications</span>
<span class="absolute top-1.5 right-1.5 w-2 h-2 bg-red-500 rounded-full"></span>
</button>
</div>
</header>
<!-- Scrollable Content -->
<div class="flex-1 overflow-y-auto p-6 space-y-6">
<div class="max-w-[1200px] mx-auto w-full">
<!-- Breadcrumbs -->
<div class="flex flex-wrap gap-2 px-4 py-2">
<a class="text-[#9da6b9] hover:text-white transition-colors text-sm font-medium leading-normal flex items-center gap-1" href="#">
<span class="material-symbols-outlined !text-lg">dashboard</span>
                            Dashboard
                        </a>
<span class="text-[#9da6b9] text-sm font-medium leading-normal">/</span>
<span class="text-white text-sm font-medium leading-normal">Gestión de Usuarios</span>
</div>
<!-- Page Heading -->
<div class="flex flex-wrap justify-between items-end gap-4 px-4 py-6">
<div class="flex min-w-72 flex-col gap-2">
<h1 class="text-white text-3xl md:text-4xl font-black leading-tight tracking-[-0.033em]">Gestión de Usuarios</h1>
<p class="text-[#9da6b9] text-base font-normal leading-normal">Administra los usuarios registrados, sus estados y permisos en la plataforma.</p>
</div>
<button onclick="showCreateUserModal()" class="flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-10 px-4 bg-primary hover:bg-blue-600 transition-colors text-white text-sm font-bold leading-normal tracking-[0.015em] shadow-lg shadow-blue-900/20">
<span class="material-symbols-outlined mr-2 !text-lg">add</span>
<span class="truncate">Crear Nuevo Usuario</span>
</button>
</div>
<!-- Filters & Search Toolbar -->
<div class="flex flex-col md:flex-row gap-4 px-4 py-4 bg-surface-dark/50 rounded-xl mb-4 border border-border-dark mx-4">
<div class="flex-1 relative">
<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
<span class="material-symbols-outlined text-[#9da6b9]">search</span>
</div>
<input id="userSearchInput" oninput="filterUsers()" class="w-full bg-background-dark text-white border border-[#3b4354] rounded-lg pl-10 pr-4 py-2.5 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary placeholder-[#9da6b9] text-sm transition-all" placeholder="Buscar por nombre, email o ID..."/>
</div>
<div class="flex gap-4 w-full md:w-auto">
<div class="relative min-w-[160px] flex-1 md:flex-none">
<select id="statusFilterSelect" onchange="filterUsers()" class="w-full bg-background-dark text-white border border-[#3b4354] rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-sm appearance-none cursor-pointer">
<option value="">Estado: Todos</option>
<option value="active">Activo</option>
<option value="inactive">Inactivo</option>
<option value="pending">Pendiente</option>
</select>
<div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-[#9da6b9]">
<span class="material-symbols-outlined !text-xl">expand_more</span>
</div>
</div>
<div class="relative min-w-[160px] flex-1 md:flex-none">
<select id="sortFilterSelect" onchange="filterUsers()" class="w-full bg-background-dark text-white border border-[#3b4354] rounded-lg px-4 py-2.5 focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary text-sm appearance-none cursor-pointer">
<option value="">Ordenar por: Recientes</option>
<option value="oldest">Antiguos</option>
<option value="name_asc">Nombre (A-Z)</option>
<option value="name_desc">Nombre (Z-A)</option>
</select>
<div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-[#9da6b9]">
<span class="material-symbols-outlined !text-xl">sort</span>
</div>
</div>
</div>
</div>
<!-- Data Table -->
<div class="px-4 py-2">
<div class="overflow-x-auto rounded-xl border border-border-dark bg-background-dark shadow-xl shadow-black/20">
<table class="w-full text-left border-collapse">
<thead>
<tr class="bg-surface-dark border-b border-border-dark">
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9] w-[60px] text-center">
<input id="selectAllUsers" onclick="toggleSelectAllUsers()" class="rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary" type="checkbox"/>
</th>
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9]">Usuario</th>
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9]">Email / Teléfono</th>
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9]">Registro</th>
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9]">Estado</th>
<th class="p-4 text-xs font-medium uppercase tracking-wider text-[#9da6b9] text-right">Acciones</th>
</tr>
</thead>
<tbody class="divide-y divide-border-dark">
<!-- Row 1 -->
<tr class="hover:bg-surface-dark/50 transition-colors group cursor-pointer" data-user-id="8293" data-status="active" data-name="Juan Pérez" data-email="juan.perez@example.com" onclick="window.location.href='DetallesUsuarioAdmin.html?userId=8293'">
<td class="p-4 text-center" onclick="event.stopPropagation()">
<input class="user-checkbox rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary opacity-50 group-hover:opacity-100 transition-opacity" type="checkbox" data-user-id="8293"/>
</td>
<td class="p-4">
<div class="flex items-center gap-3">
<div class="h-10 w-10 rounded-full bg-cover bg-center border border-border-dark" data-alt="Avatar de Juan Pérez" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAPPtsNAPaU9CgF3Ndb0DnD4BY-TbXGgXAgGR7bScQNxU6u5_inTAQo_ymHIWvaFI1MUJBpIx3R7xQ0p97bEM3DOaOHhP5bceUQNEzNCPRZin5yE4xJ0oeep6bR_RX9Ot5sPTC_Z1_PaLA1rDnCCHH2kMB2K1Fzl6yH9NkiL_CtrE-8Sl_csBaehGkRA2j-XftDcDsaZSXZQmwX_R0CB9hD2LRBDbyQ4f3cbqbV0JZ2awiFtQqh9MH9wB7U1qi5jZcjWBnaNXCTlBI");'></div>
<div class="flex flex-col">
<span class="text-white text-sm font-semibold">Juan Pérez</span>
<span class="text-[#9da6b9] text-xs">ID: #8293</span>
</div>
</div>
</td>
<td class="p-4">
<div class="flex flex-col">
<span class="text-[#9da6b9] text-sm">juan.perez@example.com</span>
<span class="text-[#6b7280] text-xs">+34 612 345 678</span>
</div>
</td>
<td class="p-4 text-sm text-[#9da6b9]">
                                            12 Oct 2023
                                        </td>
<td class="p-4">
<span class="inline-flex items-center gap-1.5 rounded-full bg-green-500/10 px-2.5 py-1 text-xs font-medium text-green-400 border border-green-500/20">
<span class="h-1.5 w-1.5 rounded-full bg-green-400"></span>
                                                Activo
                                            </span>
</td>
<td class="p-4 text-right">
<div class="flex items-center justify-end gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
<button class="p-2 text-[#9da6b9] hover:text-white hover:bg-surface-dark rounded-lg transition-colors" title="Editar">
<span class="material-symbols-outlined !text-[20px]">edit</span>
</button>
<button class="p-2 text-[#9da6b9] hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors" title="Desactivar cuenta">
<span class="material-symbols-outlined !text-[20px]">block</span>
</button>
</div>
</td>
</tr>
<!-- Row 2 -->
<tr class="hover:bg-surface-dark/50 transition-colors group cursor-pointer" data-user-id="8294" data-status="inactive" data-name="Maria Garcia" data-email="maria.garcia@example.com" onclick="window.location.href='DetallesUsuarioAdmin.html?userId=8294'">
<td class="p-4 text-center" onclick="event.stopPropagation()">
<input class="user-checkbox rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary opacity-50 group-hover:opacity-100 transition-opacity" type="checkbox" data-user-id="8294"/>
</td>
<td class="p-4">
<div class="flex items-center gap-3">
<div class="h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center text-primary font-bold border border-primary/20">MG</div>
<div class="flex flex-col">
<span class="text-white text-sm font-semibold">Maria Garcia</span>
<span class="text-[#9da6b9] text-xs">ID: #8294</span>
</div>
</div>
</td>
<td class="p-4">
<div class="flex flex-col">
<span class="text-[#9da6b9] text-sm">maria.garcia@example.com</span>
<span class="text-[#6b7280] text-xs">+34 622 987 654</span>
</div>
</td>
<td class="p-4 text-sm text-[#9da6b9]">
                                            10 Oct 2023
                                        </td>
<td class="p-4">
<span class="inline-flex items-center gap-1.5 rounded-full bg-gray-500/10 px-2.5 py-1 text-xs font-medium text-gray-400 border border-gray-500/20">
<span class="h-1.5 w-1.5 rounded-full bg-gray-400"></span>
                                                Inactivo
                                            </span>
</td>
<td class="p-4 text-right">
<div class="flex items-center justify-end gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity">
<button class="p-2 text-[#9da6b9] hover:text-white hover:bg-surface-dark rounded-lg transition-colors" title="Editar">
<span class="material-symbols-outlined !text-[20px]">edit</span>
</button>
<button onclick="event.stopPropagation(); toggleUserStatus('8294', 'Maria Garcia', 'inactive')" class="p-2 text-[#9da6b9] hover:text-green-400 hover:bg-green-400/10 rounded-lg transition-colors" title="Activar cuenta">
<span class="material-symbols-outlined !text-[20px]">check_circle</span>
</button>
</div>
</td>
</tr>
<!-- Row 3 -->
<tr class="hover:bg-surface-dark/50 transition-colors group cursor-pointer" data-user-id="8295" onclick="window.location.href='ZonaPeligroUsuario.html?userId=8295'">
<td class="p-4 text-center" onclick="event.stopPropagation()">
<input class="rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary opacity-50 group-hover:opacity-100 transition-opacity" type="checkbox"/>
</td>
<td class="p-4">
<div class="flex items-center gap-3">
<div class="h-10 w-10 rounded-full bg-cover bg-center border border-border-dark" data-alt="Avatar de Carlos Lopez" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuA80RfleoWbDvy1m9MS5NJtn7r8uG_3qifK6VgHJlUJnFmLZrC89xDphkdFMtyQ5jj05N8g32p8HthkKF-TgM2rpTqCSydCDhUiOZd2ow_zHADzTOjYQ5-YEFkPTDN6HtIdu4C2LH9HyHRxs7Q5s1RvL8YiXwVAxr4lyieqPpUvguHgmizNcuwsvtpxihNLJqGIk17rDR2rDG7FnZazSCK76bvdRuUlKRBidTbHestcDq9n1jnspvKWJAUN4t2G0lT1Pxx9cI1EGcI");'></div>
<div class="flex flex-col">
<span class="text-white text-sm font-semibold">Carlos Lopez</span>
<span class="text-[#9da6b9] text-xs">ID: #8295</span>
</div>
</div>
</td>
<td class="p-4">
<div class="flex flex-col">
<span class="text-[#9da6b9] text-sm">carlos.lopez@example.com</span>
<span class="text-[#6b7280] text-xs">--</span>
</div>
</td>
<td class="p-4 text-sm text-[#9da6b9]">
                                            08 Oct 2023
                                        </td>
<td class="p-4">
<span class="inline-flex items-center gap-1.5 rounded-full bg-green-500/10 px-2.5 py-1 text-xs font-medium text-green-400 border border-green-500/20">
<span class="h-1.5 w-1.5 rounded-full bg-green-400"></span>
                                                Activo
                                            </span>
</td>
<td class="p-4 text-right">
<div class="flex items-center justify-end gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
<button class="p-2 text-[#9da6b9] hover:text-white hover:bg-surface-dark rounded-lg transition-colors" title="Editar">
<span class="material-symbols-outlined !text-[20px]">edit</span>
</button>
<button class="p-2 text-[#9da6b9] hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors" title="Desactivar cuenta">
<span class="material-symbols-outlined !text-[20px]">block</span>
</button>
</div>
</td>
</tr>
<!-- Row 4 -->
<tr class="hover:bg-surface-dark/50 transition-colors group cursor-pointer" data-user-id="8296" onclick="window.location.href='ZonaPeligroUsuario.html?userId=8296'">
<td class="p-4 text-center" onclick="event.stopPropagation()">
<input class="rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary opacity-50 group-hover:opacity-100 transition-opacity" type="checkbox"/>
</td>
<td class="p-4">
<div class="flex items-center gap-3">
<div class="h-10 w-10 rounded-full bg-purple-500/20 flex items-center justify-center text-purple-400 font-bold border border-purple-500/20">AM</div>
<div class="flex flex-col">
<span class="text-white text-sm font-semibold">Ana Martinez</span>
<span class="text-[#9da6b9] text-xs">ID: #8296</span>
</div>
</div>
</td>
<td class="p-4">
<div class="flex flex-col">
<span class="text-[#9da6b9] text-sm">ana.martinez@example.com</span>
<span class="text-[#6b7280] text-xs">+34 633 123 456</span>
</div>
</td>
<td class="p-4 text-sm text-[#9da6b9]">
                                            05 Oct 2023
                                        </td>
<td class="p-4">
<span class="inline-flex items-center gap-1.5 rounded-full bg-amber-500/10 px-2.5 py-1 text-xs font-medium text-amber-400 border border-amber-500/20">
<span class="h-1.5 w-1.5 rounded-full bg-amber-400"></span>
                                                Pendiente
                                            </span>
</td>
<td class="p-4 text-right">
<div class="flex items-center justify-end gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity">
<button class="p-2 text-[#9da6b9] hover:text-white hover:bg-surface-dark rounded-lg transition-colors" title="Editar">
<span class="material-symbols-outlined !text-[20px]">edit</span>
</button>
<button class="p-2 text-[#9da6b9] hover:text-green-400 hover:bg-green-400/10 rounded-lg transition-colors" title="Aprobar cuenta" onclick="event.stopPropagation()">
<span class="material-symbols-outlined !text-[20px]">check</span>
</button>
</div>
</td>
</tr>
<!-- Row 5 -->
<tr class="hover:bg-surface-dark/50 transition-colors group cursor-pointer" data-user-id="8297" onclick="window.location.href='ZonaPeligroUsuario.html?userId=8297'">
<td class="p-4 text-center" onclick="event.stopPropagation()">
<input class="rounded bg-background-dark border-[#3b4354] text-primary focus:ring-offset-background-dark focus:ring-primary opacity-50 group-hover:opacity-100 transition-opacity" type="checkbox"/>
</td>
<td class="p-4">
<div class="flex items-center gap-3">
<div class="h-10 w-10 rounded-full bg-cover bg-center border border-border-dark" data-alt="Avatar de Luis Rodriguez" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAmfN1J8Yp1o3I9XGKtWr7sFwBvkGdCUiXu4M8uhs9ADRNHIz3zp2Yqb0U_OAK8eTlOoCU0pTL9Tzrc4tuzVRbxWbBgCd5FAlGMqry4E6Uonlw2N00Tua5CI2XN8j7ohoLbjxkOqnMig4KMqOI3sChtlnW-dyJwfF7ew5dFhgBRPt4KKrfBNBHbqOp1F658Ss0ThfmbC7cF80qYdkM8KTpzET8LaXSd35gVhA2ThM-Y2eSBAqGMft8S93cjznQW0uZOGR9TI2seCwY");'></div>
<div class="flex flex-col">
<span class="text-white text-sm font-semibold">Luis Rodriguez</span>
<span class="text-[#9da6b9] text-xs">ID: #8297</span>
</div>
</div>
</td>
<td class="p-4">
<div class="flex flex-col">
<span class="text-[#9da6b9] text-sm">luis.rod@example.com</span>
<span class="text-[#6b7280] text-xs">+34 655 444 333</span>
</div>
</td>
<td class="p-4 text-sm text-[#9da6b9]">
                                            01 Oct 2023
                                        </td>
<td class="p-4">
<span class="inline-flex items-center gap-1.5 rounded-full bg-green-500/10 px-2.5 py-1 text-xs font-medium text-green-400 border border-green-500/20">
<span class="h-1.5 w-1.5 rounded-full bg-green-400"></span>
                                                Activo
                                            </span>
</td>
<td class="p-4 text-right">
<div class="flex items-center justify-end gap-2 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity" onclick="event.stopPropagation()">
<button class="p-2 text-[#9da6b9] hover:text-white hover:bg-surface-dark rounded-lg transition-colors" title="Editar">
<span class="material-symbols-outlined !text-[20px]">edit</span>
</button>
<button class="p-2 text-[#9da6b9] hover:text-red-400 hover:bg-red-400/10 rounded-lg transition-colors" title="Desactivar cuenta">
<span class="material-symbols-outlined !text-[20px]">block</span>
</button>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- Pagination -->
<div class="px-4 py-4 flex flex-col sm:flex-row items-center justify-between gap-4 mt-2">
<p class="text-sm text-[#9da6b9]">
                            Mostrando <span class="font-medium text-white">1</span> a <span class="font-medium text-white">5</span> de <span class="font-medium text-white">245</span> usuarios
                        </p>
<nav aria-label="Pagination" class="isolate inline-flex -space-x-px rounded-md shadow-sm">
<a id="prevUsersPage" onclick="changeUsersPage('prev')" class="relative inline-flex items-center rounded-l-md px-2 py-2 text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] hover:bg-surface-dark focus:z-20 focus:outline-offset-0 transition-colors cursor-pointer">
<span class="sr-only">Previous</span>
<span class="material-symbols-outlined !text-sm">chevron_left</span>
</a>
<a id="page1" onclick="changeUsersPage(1)" aria-current="page" class="relative z-10 inline-flex items-center bg-primary px-4 py-2 text-sm font-semibold text-white focus:z-20 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary cursor-pointer">1</a>
<a id="page2" onclick="changeUsersPage(2)" class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] hover:bg-surface-dark focus:z-20 focus:outline-offset-0 transition-colors cursor-pointer">2</a>
<a id="page3" onclick="changeUsersPage(3)" class="relative hidden items-center px-4 py-2 text-sm font-semibold text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] hover:bg-surface-dark focus:z-20 focus:outline-offset-0 md:inline-flex transition-colors cursor-pointer">3</a>
<span class="relative inline-flex items-center px-4 py-2 text-sm font-semibold text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] focus:outline-offset-0">...</span>
<a id="page12" onclick="changeUsersPage(12)" class="relative hidden items-center px-4 py-2 text-sm font-semibold text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] hover:bg-surface-dark focus:z-20 focus:outline-offset-0 md:inline-flex transition-colors cursor-pointer">12</a>
<a id="nextUsersPage" onclick="changeUsersPage('next')" class="relative inline-flex items-center rounded-r-md px-2 py-2 text-[#9da6b9] ring-1 ring-inset ring-[#3b4354] hover:bg-surface-dark focus:z-20 focus:outline-offset-0 transition-colors cursor-pointer">
<span class="sr-only">Next</span>
<span class="material-symbols-outlined !text-sm">chevron_right</span>
</a>
</nav>
</div>
</div>
</main>
</div>
<script>
/**
 * GESTIÓN DE USUARIOS ADMINISTRADOR - Funcionalidades JavaScript
 * Todas las funciones están documentadas para facilitar la migración a otra arquitectura
 */

// ========== ESTADO GLOBAL ==========
let currentUsersPage = 1;
let totalUsersPages = 12;
let currentSearchQuery = '';
let currentStatusFilter = '';
let currentSortFilter = '';

// ========== CREAR NUEVO USUARIO ==========
/**
 * Muestra modal para crear nuevo usuario
 */
function showCreateUserModal() {
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 z-50 overflow-y-auto';
    modal.onclick = function(e) { if (e.target === modal) modal.remove(); };
    
    modal.innerHTML = `
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 bg-gray-900/75 backdrop-blur-sm"></div>
            <div class="inline-block align-bottom bg-white dark:bg-[#1c212c] rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full border border-gray-200 dark:border-border-dark">
                <div class="px-4 pt-5 pb-4 sm:p-6">
                    <h3 class="text-lg leading-6 font-medium text-slate-900 dark:text-white mb-4">Crear Nuevo Usuario</h3>
                    <form id="createUserForm" onsubmit="createUser(event)" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nombre Completo</label>
                            <input type="text" required class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-primary sm:text-sm bg-white dark:bg-[#111621] dark:text-white px-3 py-2" placeholder="Ej: Juan Pérez"/>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Email</label>
                            <input type="email" required class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-primary sm:text-sm bg-white dark:bg-[#111621] dark:text-white px-3 py-2" placeholder="usuario@email.com"/>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Teléfono</label>
                            <input type="tel" class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-primary sm:text-sm bg-white dark:bg-[#111621] dark:text-white px-3 py-2" placeholder="+34 612 345 678"/>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Estado Inicial</label>
                            <select class="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-primary focus:ring-primary sm:text-sm bg-white dark:bg-[#111621] dark:text-white px-3 py-2">
                                <option value="active">Activo</option>
                                <option value="pending">Pendiente</option>
                                <option value="inactive">Inactivo</option>
                            </select>
                        </div>
                        <div class="bg-gray-50 dark:bg-[#151a23] px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                            <button type="submit" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary text-base font-medium text-white hover:bg-blue-600 sm:ml-3 sm:w-auto sm:text-sm">
                                Crear Usuario
                            </button>
                            <button type="button" onclick="this.closest('.fixed').remove()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 dark:border-gray-600 shadow-sm px-4 py-2 bg-white dark:bg-[#1c212c] text-base font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                                Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
}

/**
 * Crea un nuevo usuario
 * @param {Event} e - Evento del formulario
 */
function createUser(e) {
    e.preventDefault();
    const formData = new FormData(e.target);
    console.log('Crear usuario:', Object.fromEntries(formData));
    
    showNotification('Usuario creado exitosamente', 'success');
    e.target.closest('.fixed').remove();
    
    // En producción: llamada API
    // fetch('/api/users', { method: 'POST', body: JSON.stringify(data) })
    //     .then(response => response.json())
    //     .then(data => {
    //         showNotification('Usuario creado', 'success');
    //         location.reload();
    //     });
}

// ========== FILTRADO Y BÚSQUEDA ==========
/**
 * Filtra usuarios según búsqueda, estado y orden
 */
function filterUsers() {
    const searchInput = document.getElementById('userSearchInput');
    const statusFilter = document.getElementById('statusFilterSelect');
    const sortFilter = document.getElementById('sortFilterSelect');
    
    currentSearchQuery = searchInput ? searchInput.value.toLowerCase().trim() : '';
    currentStatusFilter = statusFilter ? statusFilter.value : '';
    currentSortFilter = sortFilter ? sortFilter.value : '';
    
    const rows = document.querySelectorAll('tbody tr[data-user-id]');
    let visibleCount = 0;
    
    rows.forEach(row => {
        let shouldShow = true;
        const userId = row.getAttribute('data-user-id');
        const userName = (row.getAttribute('data-name') || '').toLowerCase();
        const userEmail = (row.getAttribute('data-email') || '').toLowerCase();
        const userStatus = row.getAttribute('data-status');
        
        // Filtro de búsqueda
        if (currentSearchQuery) {
            if (!userName.includes(currentSearchQuery) && 
                !userEmail.includes(currentSearchQuery) && 
                !userId.includes(currentSearchQuery)) {
                shouldShow = false;
            }
        }
        
        // Filtro de estado
        if (shouldShow && currentStatusFilter) {
            if (userStatus !== currentStatusFilter) {
                shouldShow = false;
            }
        }
        
        // Mostrar u ocultar
        if (shouldShow) {
            row.style.display = '';
            visibleCount++;
        } else {
            row.style.display = 'none';
        }
    });
    
    // Ordenar filas visibles
    if (currentSortFilter) {
        sortUserRows(currentSortFilter);
    }
    
    showNotification(`${visibleCount} usuario(s) encontrado(s)`, 'info');
}

/**
 * Ordena las filas de usuarios
 * @param {string} sortType - Tipo de ordenamiento
 */
function sortUserRows(sortType) {
    const tbody = document.querySelector('tbody');
    const rows = Array.from(tbody.querySelectorAll('tr[data-user-id]')).filter(r => r.style.display !== 'none');
    
    rows.sort((a, b) => {
        if (sortType === 'name_asc') {
            return (a.getAttribute('data-name') || '').localeCompare(b.getAttribute('data-name') || '');
        } else if (sortType === 'name_desc') {
            return (b.getAttribute('data-name') || '').localeCompare(a.getAttribute('data-name') || '');
        } else if (sortType === 'oldest') {
            // Ordenar por fecha de registro (implementar si hay datos)
            return 0;
        }
        return 0;
    });
    
    rows.forEach(row => tbody.appendChild(row));
}

// ========== SELECCIÓN MÚLTIPLE ==========
/**
 * Selecciona/deselecciona todos los usuarios
 */
function toggleSelectAllUsers() {
    const selectAll = document.getElementById('selectAllUsers');
    const checkboxes = document.querySelectorAll('.user-checkbox');
    
    checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
    });
}

// ========== EDITAR USUARIO ==========
/**
 * Edita un usuario
 * @param {string} userId - ID del usuario
 * @param {string} userName - Nombre del usuario
 */
function editUser(userId, userName) {
    window.location.href = `DetallesUsuarioAdmin.html?userId=${userId}&action=edit`;
}

// ========== ACTIVAR/DESACTIVAR USUARIO ==========
/**
 * Cambia el estado de un usuario (activo/inactivo)
 * @param {string} userId - ID del usuario
 * @param {string} userName - Nombre del usuario
 * @param {string} currentStatus - Estado actual
 */
function toggleUserStatus(userId, userName, currentStatus) {
    const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
    const action = newStatus === 'active' ? 'activar' : 'desactivar';
    
    if (!confirm(`¿Deseas ${action} la cuenta de ${userName}?`)) {
        return;
    }
    
    const row = document.querySelector(`tr[data-user-id="${userId}"]`);
    if (row) {
        row.setAttribute('data-status', newStatus);
        
        // Actualizar badge de estado
        const statusCell = row.cells[4];
        if (newStatus === 'active') {
            statusCell.innerHTML = `
                <span class="inline-flex items-center gap-1.5 rounded-full bg-green-500/10 px-2.5 py-1 text-xs font-medium text-green-400 border border-green-500/20">
                    <span class="h-1.5 w-1.5 rounded-full bg-green-400"></span>
                    Activo
                </span>
            `;
        } else {
            statusCell.innerHTML = `
                <span class="inline-flex items-center gap-1.5 rounded-full bg-gray-500/10 px-2.5 py-1 text-xs font-medium text-gray-400 border border-gray-500/20">
                    <span class="h-1.5 w-1.5 rounded-full bg-gray-400"></span>
                    Inactivo
                </span>
            `;
        }
        
        // Actualizar botón de acción
        const actionsCell = row.cells[5];
        const actionButton = actionsCell.querySelector('button:last-child');
        if (newStatus === 'active') {
            actionButton.setAttribute('onclick', `toggleUserStatus('${userId}', '${userName}', 'active')`);
            actionButton.setAttribute('title', 'Desactivar cuenta');
            actionButton.classList.remove('hover:text-green-400', 'hover:bg-green-400/10');
            actionButton.classList.add('hover:text-red-400', 'hover:bg-red-400/10');
        } else {
            actionButton.setAttribute('onclick', `toggleUserStatus('${userId}', '${userName}', 'inactive')`);
            actionButton.setAttribute('title', 'Activar cuenta');
            actionButton.classList.remove('hover:text-red-400', 'hover:bg-red-400/10');
            actionButton.classList.add('hover:text-green-400', 'hover:bg-green-400/10');
        }
    }
    
    showNotification(`Usuario ${action}do exitosamente`, 'success');
    
    // En producción: llamada API
    // fetch(`/api/users/${userId}/status`, { 
    //     method: 'PATCH',
    //     body: JSON.stringify({ status: newStatus })
    // })
}

// ========== PAGINACIÓN ==========
/**
 * Cambia la página de usuarios
 * @param {string|number} direction - 'prev', 'next' o número de página
 */
function changeUsersPage(direction) {
    if (direction === 'prev' && currentUsersPage > 1) {
        currentUsersPage--;
    } else if (direction === 'next' && currentUsersPage < totalUsersPages) {
        currentUsersPage++;
    } else if (typeof direction === 'number') {
        currentUsersPage = direction;
    }
    
    // Actualizar números de página
    for (let i = 1; i <= 12; i++) {
        const pageEl = document.getElementById(`page${i}`);
        if (pageEl) {
            if (i === currentUsersPage) {
                pageEl.classList.add('bg-primary', 'text-white');
                pageEl.classList.remove('text-[#9da6b9]');
                pageEl.setAttribute('aria-current', 'page');
            } else {
                pageEl.classList.remove('bg-primary', 'text-white');
                pageEl.classList.add('text-[#9da6b9]');
                pageEl.removeAttribute('aria-current');
            }
        }
    }
    
    // Actualizar botones prev/next
    const prevBtn = document.getElementById('prevUsersPage');
    const nextBtn = document.getElementById('nextUsersPage');
    
    if (prevBtn) {
        prevBtn.classList.toggle('opacity-50', currentUsersPage === 1);
        prevBtn.classList.toggle('cursor-not-allowed', currentUsersPage === 1);
    }
    
    if (nextBtn) {
        nextBtn.classList.toggle('opacity-50', currentUsersPage === totalUsersPages);
        nextBtn.classList.toggle('cursor-not-allowed', currentUsersPage === totalUsersPages);
    }
    
    // En producción, cargaría los datos de la página
    showNotification(`Página ${currentUsersPage} de ${totalUsersPages}`, 'info');
}

// ========== NOTIFICACIONES ==========
/**
 * Muestra una notificación toast
 * @param {string} message - Mensaje a mostrar
 * @param {string} type - Tipo: 'success', 'error', 'info'
 */
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg flex items-center gap-3 ${
        type === 'success' ? 'bg-green-500 text-white' : 
        type === 'error' ? 'bg-red-500 text-white' : 
        'bg-blue-500 text-white'
    }`;
    notification.style.opacity = '0';
    notification.style.transform = 'translateX(100%)';
    notification.style.transition = 'all 0.3s ease-in-out';
    
    notification.innerHTML = `
        <span class="material-symbols-outlined">${type === 'success' ? 'check_circle' : type === 'error' ? 'error' : 'info'}</span>
        <span class="font-medium">${message}</span>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
        notification.style.opacity = '1';
        notification.style.transform = 'translateX(0)';
    }, 10);
    
    setTimeout(() => {
        notification.style.opacity = '0';
        notification.style.transform = 'translateX(100%)';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}
</script>
</body></html>